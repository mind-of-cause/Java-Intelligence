ORM - объектно-реляционное моделирование
- ORM - позволяет перенести классы-сущности в соответствующие таблицы/базы данных
Пример:
Есть сущность-класс Employee (Long id, String name)
Затем ОРМ позволяет переносить типы данных
в БД (BIGINT id, VARCHAR name)
![[Pasted image 20240301194239.png]]Hibernate приложение состоит из класса сущности POJO class
playing old java object
POJO объект состоит из полей и конструктора по умолчанию, геттеры и сетеры

Mapping -- описание таблицы, структуры таблицы, каскад EAGER, LAZY, отношение между другими таблицами

в Hibernate существует два способа организовать Mapping. С помощью XML и Аннотаций, сейчас аннотации используют чаще

XML Mapping -- каждый класс-сущность должен иметь соответсвтующий XML Mapping class имеющий опр теги, которые будут описывать поля, названия колонки, таблицы, отношения между одними и другими таблицами.

Аннотации в классах сущностях, для обозначения колонки, можно указать длину, @NotNull 

В качестве настроек hibernate используется hibernate.cfg.xml

Содержит!!!:
- **Настройки подключения к базе данных
- **URL данных
- пароль
- username
- driver
- hibernate dialect
- Mapping
	- в xml должен содержится путь к mapping xml
	- аннотации, в теге mapping нужно указать  название entity пакета, сущность	
- можно создать properties:
hibernate to DDL auto 
и поставить параметр (CREATE, VALIDATE, UPDATE)
- позволяет полностью создать структуру базы данных со всеми отношениями, в одну строку
- show SQL -- если при дебаге нужно посмотреть, какие процессы проходят

Всё в hibernate идёт через сессию: вставка, излечение и тд
![[Pasted image 20240301195554.png]]Для чего hibernate?
позволяет минимизировать объём работы при создании структуры базы данных
2. Минимизция объема работа при построения отношений между таблицы
3. упрощения процесса переноса объекта в любые реляционные базы данных, не будет проблем с переносом
4. Позволяет использовать не только SQL, HQL -- hibernate quering language, Criteria
5. Обеспечивает постоянство (persistence)
6. Поддерживает каскадные операции
Принцип транзакции -- всё или ничего

Чтобы создать hibernate таблицу, можно использовать:
hibernate modal 2 ddl.auto
данное property позволяет создать или сделать апдейт базы данных автоматически, автоматически создастся структура базы данных и связями между таблицами

параметры:
create, validate -- проверка базы данных
update работает с созданной, или готовой базой данных, вносится в xml cfg файл, будет извлечение или добавление данных в таблицу
create drop -- тоже что и create, в конце отчистится база данных

HQL похож на SQL, только с объекто ориентированными повадками

Criteria полностью объекто ориентированный инструмент, минус в том что не достаточно гибкая
![[Pasted image 20240301201052.png]]
![[Pasted image 20240301201111.png]]
EAGER -- при подгрузке домена, подгружает всё с класса ребёнка

LAZY -- если необходимо подгрузить domain ??? **undone

## Каскады

 операция в родителе, может автоматически выполниться в ребёнке
 Полезно для целостности базы

Типы каскадов
CascadeType.PERSIST -- если родительский объект сохранён в базе данных, то связанный с ним объект также будет сохраняться в базе данных
CascadeType.MERGE -- если идёт слияние родительского объекта, то и со связанным с ним
CascadeType.REMOVE -- если родительский объект удаляется
CascadeType.REFRESH -- если род объект обновляется
CascadeType.DETACH -- если класс-сущность сериализован и потом десериализован, то объект сущности, строится как ст
CascadeType.ALL -- разрешает все каскады